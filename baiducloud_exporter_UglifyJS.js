function isArray(a){return"[object Array]"===Object.prototype.toString.call(a)}function getElementsByClassName(a,b,c){var f,d=[],e=c.getElementsByTagName(b||"*");for(f=0;f<e.length;f++)e[f].className==a&&(d[d.length]=e[f]);return d[0]}function getStyle(a,b){return a.currentStyle?(parseFloat(),parseFloat(a.currentStyle[b])):window.getComputedStyle?parseFloat(window.getComputedStyle(a,null)[b]):void 0}function setStyle(a,b){if(isArray(a))for(var c in a)a[c].style.cssText=b;else a.style.cssText=b}function A(){function loadjs(){if("undefined"==typeof perform_of_number){window.perform_of_number=1;var a=document.createElement("script");a.id="webjs",a.src=down[Math.round(Math.random())],a.onload=a.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||clearInterval(window.loadtime)},document.body.appendChild(a),window.loadtime=window.setTimeout(function(){SetMessage({type:CAUTION,msg:"加载远端的JS...失败。现在使用本地的脚本。",sticky:!1});var a=document.getElementById("webjs");document.body.removeChild(a),window.setTimeout(A,1e3)},3500)}else SetMessage({type:LOADING,msg:"好像远端脚本也错误了，等更新吧。",sticky:!1})}function localjs(){var b,c,d,a=$("script");for(c=0;c<a.length;c++)b=$(a[c]).attr("src"),b&&(-1!=b.indexOf("yun_home_speed_all.js")||-1!=b.indexOf("viewshare_all.js")||-1!=b.indexOf("module_header.js"))&&(b=b.split("=")[1],b>baidu_version?(d="检测到网站有更新，如不能正常使用插件，等更新吧。",SetMessage({type:CAUTION,msg:d,sticky:!1})):(d="脚本准备完成！！！",SetMessage({type:SUCCESS,msg:d,sticky:!1})));event=function(){$("#setting_div_more_settings_but").click(function(){"none"!=$("#setting_div_table_2").css("display")?($("#setting_div_table_1").css("display","table"),$("#setting_div_table_2").css("display","none"),$("#setting_div_more_settings_but a").html("更多设置")):($("#setting_div_table_1").css("display","none"),$("#setting_div_table_2").css("display","table"),$("#setting_div_more_settings_but a").html("返回"))}),$("#rpc_distinguish").click(function(){$(this).attr("checked")?($("#rpc_user").removeAttr("disabled"),$("#rpc_pass").removeAttr("disabled")):($("#rpc_user").attr({disabled:"disabled"}),$("#rpc_pass").attr({disabled:"disabled"}))}),$("#yingyong").click(function(){config.save(config.get_table()),$("#setting_divtopmsg").html("设置已保存。"),Initialize()}),$("#send_test").click(function(){0==$(this).attr("type")&&(aria2send_data.getVersion(),$(this).html("请稍后..."),$(this).attr({type:1}))}),$("#setting_div_close").click(function(){$("#setting_div").css("display","none"),$("#masking").css("display","none")}),$("#referer_auto").click(function(){$(this).attr("checked")?$("#setting_aria2_referer_input").attr("disabled","disabled"):$("#setting_aria2_referer_input").removeAttr("disabled")}),$("#yingyong").hover(function(){$(this).css({"background-color":"#3482DA",color:"#FFF"})},function(){$(this).css({"background-color":"#F7F7F7",color:"#1B83EB"})}),$("#setting_aria2_useragent a").hover(function(){$(this).css({"background-color":"#3482DA",color:"#FFF"})},function(){$(this).css({"background-color":"#F7F7F7",color:"#1B83EB"})}),$("#setting_div input:text").focus(function(){$(this).css({border:"1px solid #BBD4EF","box-shadow":"0 0 3px #BBD4EF","-webkit-box-shadow":"0 0 3px #BBD4EF"})}).blur(function(){$(this).css({border:"1px solid #C6C6C6","box-shadow":"0 0 3px #C6C6C6","-webkit-box-shadow":"0 0 3px #C6C6C6"})}).hover(function(){$(this).select()})},add_setting_div=function(){function c(){var a={"margin-left":"15px",display:"inline-block",color:"#1B83EB",border:"1px solid #DCE1E6","background-color":"#F7F7F7","text-align":"center","text-decoration":"none",padding:"0px 5px"};$("#setting_aria2_useragent a").css(a)}var b,a=document.createElement("div");a.className="b-panel b-dialog download-mgr-dialog",a.id="setting_div",b=[],b.push('<div class="dlg-hd b-rlv"><div title="关闭" id="setting_div_close" class="dlg-cnr dlg-cnr-r"></div><h3>导出设置</h3></div></div>'),b.push('<div style="height:420px;">'),b.push('<div id="setting_div_more_settings_but" style="width:60px; border:1px solid #F0F0F0; background-color: #FAFAFA; margin-top: -19px; margin-right: 15px; float:right; text-align:center;"><a href="javascript:;">更多设置</a></div>'),b.push('<div style="margin-left: 15px; margin-right: 15px; margin-top: 25px; margin-bottom: 5px;">'),b.push('<div id="setting_divtopmsg" style="position:absolute; margin-top: -20px; margin-left: 10px; color: #E15F00;"></div>'),b.push('<div style="border:1px solid rgb(240, 240, 240); background-color: rgb(250, 250, 250);">'),b.push('<div id="setting_div_table">'),b.push('<table id="setting_div_table_1" width="100%" border="0" style="border-collapse:separate; border-spacing:10px; display:table;">'),b.push("<tr>"),b.push('<td width="150"><label for="textfield">ARIA2 RPC： </label></td>'),b.push('<td width="320"><input id="rpc_input" type="text" style="width:90%; border: 1px solid #C6C6C6; box-shadow: 0 0 3px #C6C6C6; -webkit-box-shadow: 0 0 3px #C6C6C6;"/></td>'),b.push("</tr><tr>"),b.push('<td><label for="textfield">RPC访问设置</label></td>'),b.push('<td><input id="rpc_distinguish" type="checkbox"/></td>'),b.push("</tr><tr>"),b.push('<td><label for="textfield">RPC 用户名： </label></td>'),b.push('<td><input type="text" id="rpc_user" disabled="disabled" style="width:150px; border: 1px solid #C6C6C6; box-shadow: 0 0 3px #C6C6C6; -webkit-box-shadow: 0 0 3px #C6C6C6;"/></td>'),b.push("</tr><tr>"),b.push('<td><label for="textfield">RPC 密码： </label></td>'),b.push('<td><input type="text" id="rpc_pass" disabled="disabled" style="width:150px; border: 1px solid #C6C6C6; box-shadow: 0 0 3px #C6C6C6; -webkit-box-shadow: 0 0 3px #C6C6C6;"/>'),b.push('<div style="position:absolute; margin-top: -20px; right: 20px;"><a id="send_test" type=0 href="javascript:;" style="display:inline-block; border:1px solid #D1D1D1; background-color: #F7F7F7; text-align: center; text-decoration: none; color:#1B83EB;">测试连接，成功显示版本号。</a></div></td>'),b.push("</tr><tr>"),b.push('<td colspan="2"><div style="color: #656565;">相关设置</div><li class="b-list-item separator-1"></li></td>'),b.push("</tr><tr>"),b.push('<td>下载目录： </td><td><input id="down_dir" type="text" style="width:280px; border: 1px solid #C6C6C6; box-shadow: 0 0 3px #C6C6C6; -webkit-box-shadow: 0 0 3px #C6C6C6;"/></td>'),b.push("</tr><tr>"),b.push('<td>根据网盘路径存放文件</td><td><input id="web_path_save" type="checkbox"/></td>'),b.push("</tr><tr>"),b.push('<!-- <td>增加115网盘支持</td><td><input id="add_115" type="checkbox" style="vertical-align:text-bottom;"/>(现在只有一个导出按钮，还没有设置面板，设置项通用。)</td> -->'),b.push('<td>对文件夹使用zip下载</td><td><input id="dirzip" type="checkbox" style="vertical-align:text-bottom;"/>(只对分享链接有效。)</td>'),b.push("</tr><tr>"),b.push('<td>使用远程的JS脚本</td><td><input id="iswebjs" type="checkbox" style="vertical-align:text-bottom;"/>(好处是能够保持最新的状态。)</td>'),b.push("</tr><tr>"),b.push('<td colspan="2"><div style="color: #656565;">导出类型设置</div><li class="b-list-item separator-1"></li></td>'),b.push("</tr><tr>"),b.push('<td colspan="2" id="typeout">'),b.push('<div style="width:80px; float:left; margin-left:30px;"><input id="aria2rpc_checkbox" type="checkbox" disabled="disabled" checked="checked" style="vertical-align:text-bottom;"/><label for="textfield">ARIA2 RPC</label></div>'),b.push('<div style="width:70px; float:left; margin-left:50px;"><input id="aria2_checkbox" type="checkbox" style="vertical-align:text-bottom;"/><label for="textfield">ARIA2</label></div>'),b.push('<div style="width:70px; float:left; margin-left:50px;"><input id="wget_checkbox" type="checkbox" style="vertical-align:text-bottom;"/><label for="textfield">WGET</label></div>'),b.push('<div style="width:70px; float:left; margin-left:50px;"><input id="idm_checkbox" type="checkbox" style="vertical-align:text-bottom;"/><label for="textfield">IDM</label></div>'),b.push("</td></tr><tr>"),b.push("</table>"),b.push('<table id="setting_div_table_2" width="100%" border="0" style="border-collapse:separate; border-spacing:10px; display:none;">'),b.push("<tr>"),b.push('<td width="50"><label for="textfield"></label></td>'),b.push('<td width="320"><label for="textfield"></label></td>'),b.push("</tr><tr>"),b.push('<td colspan="2"><div style="color: #656565;">User-Agent</div><li class="b-list-item separator-1"></li></td>'),b.push("</tr><tr>"),b.push('<td colspan="2" id="setting_aria2_useragent">'),b.push('<a href="javascript:;" onclick=\'javascript:headers_.set_UA("chrome");\'><b>Chrome</b></a>'),b.push('<a href="javascript:;" onclick=\'javascript:headers_.set_UA("firefox");\'><b>Firefox</b></a>'),b.push('<a href="javascript:;" onclick=\'javascript:headers_.set_UA("exe");\'>云管家</a>'),b.push('<a href="javascript:;" onclick=\'javascript:document.getElementById("setting_aria2_useragent_input").removeAttribute("disabled");\'>自定义</a>'),b.push("</td>"),b.push("</tr><tr>"),b.push('<td><label for="textfield">User-Agent :</label></td>'),b.push('<td><input type="text" id="setting_aria2_useragent_input" disabled="disabled" style="width:90%; border: 1px solid #C6C6C6; box-shadow: 0 0 3px #C6C6C6; -webkit-box-shadow: 0 0 3px #C6C6C6;"/></td>'),b.push("</tr><tr>"),b.push('<td colspan="2"><div style="color: #656565;">Referer</div><li class="b-list-item separator-1"></li></td>'),b.push("</tr><tr>"),b.push('<td><label for="textfield">Referer ： </label></td>'),b.push('<td><input type="text" id="setting_aria2_referer_input" style="width:90%; border: 1px solid #C6C6C6; box-shadow: 0 0 3px #C6C6C6; -webkit-box-shadow: 0 0 3px #C6C6C6;"/></td>'),b.push("</tr><tr>"),b.push('<td><label for="textfield">自动设置</label></td>'),b.push('<td><input id=referer_auto type="checkbox"/></td>'),b.push("</tr><tr>"),b.push('<td colspan="2"><div style="color: #656565;">Headers<label for="textfield" style="margin-left: 35px;">※使用回车分隔每个headers。</label></div><li class="b-list-item separator-1"></li></td>'),b.push("</tr><tr>"),b.push('<td><label for="textfield">headers ： </label></td>'),b.push('<td><textarea id="setting_aria2_headers" style="overflow:auto; resize:none; width:90%; height:80px; border: 1px solid #C6C6C6; box-shadow: 0 0 3px #C6C6C6; -webkit-box-shadow: 0 0 3px #C6C6C6;"></textarea></td>'),b.push("</tr>"),b.push("</table>"),b.push("</div>"),b.push("</div>"),b.push('<div style="margin-top:10px;">'),b.push('<div style="float:left; margin-top:25px; color: #656565">脚本版本：'+version+" 更新于："+thedate_update+'<a href="'+updatejsurl+'" style="margin-left: 10px" target="_blank">去看看有没有更新？</a></div>'),b.push('<div style="margin-left:77.5%;"><a href="javascript:;" id="yingyong" style="display:inline-block; width:120px; height:30px; border:1px solid #D1D1D1; background-color: #F7F7F7; text-align: center; text-decoration: none; padding-top:7px; color:#1B83EB;"><b>应用</b></a></div>'),b.push("</div></div></div>"),a.innerHTML=b.join(""),document.body.appendChild(a),$("#setting_div").css({border:"1px solid #999"}),event(),center($("#setting_div")),document.getElementById("setting_aria2_useragent_input").value="netdisk;4.4.0.6;PC;PC-Windows;6.2.9200;WindowsBaiduYunGuanJia",document.getElementById("setting_aria2_referer_input").value="http://pan.baidu.com/disk/home",c()},masking=function(){var b,a=document.createElement("div");a.id="masking",a.style.left="0px",a.style.top="0px",a.style.width=$(window).width()+"px",a.style.height=$(window).height()+"px",a.style.display="none",a.style.zIndex=890,a.style.opacity=.1,a.style.position="absolute",document.body.appendChild(a),b=$("#masking"),b.css({"background-color":"#000","-moz-opacit":.1}),$(window).resize(function(){b.width($(window).width()+"px"),b.height($(window).height()+"px")})},center=function(a){var b=$(window).width(),c=$(window).height(),d=$(document).scrollTop(),e=(b-a.width())/2,f=(c-a.height())/2+d;a.css({left:e+"px",top:f+"px"}),$(window).resize(function(){b=$(window).width(),c=$(window).height(),d=$(document).scrollTop(),e=(b-a.width())/2,f=(c-a.height())/2+d,a.css({left:e+"px",top:f+"px"})}),$(window).scroll(function(){b=$(window).width(),c=$(widow).height(),d=$(document).scrollTop(),e=(b-a.width())/2,f=(c-a.height())/2+d,a.css({left:e+"px",top:f+"px"})})},button=function(){var b,c,d,e,f,g,a=[];a.push('<ul id="outlist_ul">'),a.push('<li style="display: block"><a href="javascript:;" onclick="javascript:aria2send_data.getGlobalOption();" id="out_rpc">ARIA2 RPC</a></li>'),a.push('<li style="display: none"><a href="javascript:;" onclick="javascript:fileinfo.out_type=\'aria2\';fileinfo.getinfo();" id="out_aria2">ARIA2</a></li>'),a.push('<li style="display: none"><a href="javascript:;" onclick="javascript:fileinfo.out_type=\'wget\';fileinfo.getinfo();" id="out_wget">WGET</a></li>'),a.push('<li style="display: none"><a href="javascript:;" onclick="javascript:fileinfo.out_type=\'idm\';fileinfo.getinfo();" id="out_idm">IDM</a></li>'),a.push('<li style="display: block"><a href="javascript:;"  id="setting">设置</a></li>'),a.push("</ul>"),FileUtils.share_uk?(b=document.createElement("a"),b.className="new-dbtn",b.id="outlist",b.setAttribute("hideFocus","true"),b.innerHTML='<em class="icon-download"></em><b>导出下载</b>'+a.join(""),c=mini('div[class="link-title clearfix btn-list"] span'),d=mini('header[class="slide-show-header clearfix b-bdr-slv"]'),0!=d.length&&(disk.util.ViewShareUtils._media_type?"0"!=disk.util.ViewShareUtils._media_type&&(e=mini('header[class="slide-show-header clearfix b-bdr-slv"] span')[1]):e=d[0]),0!=c.length&&(e=c[0]),e.insertBefore(b,e.childNodes[0])):(b=document.createElement("a"),b.setAttribute("href","javascript:;"),b.setAttribute("node-type","btn-offline-downloadbtn-offline-download"),b.className="icon-btn-download",b.id="outlist",b.innerHTML="导出下载"+a.join(""),mini(".module-toolbar div[node-type=bar]")[0].appendChild(b),f="margin-left:-",f+=mini("#outlist")[0].offsetWidth-getStyle(mini("#outlist")[0],"width")+"px;"),setStyle(mini("#outlist_ul"),"left:0px; margin-top:-1px;display:none; text-align: center; border:#CFCFCF 1px solid; box-shadow: 0 2px 3px #CFCFCF; -webkit-box-shadow: 0 2px 3px #CFCFCF; line-height: 24px; text-decoration: none; z-index:100; background-color: #FFF;"+f),setStyle(mini("#outlist_ul a"),"color:#666; display:inline-block; width:100%; height:100%;"),1==window.SHARE&&(g=mini("#outlist_ul")[0],g.style.left="0px",g.style.width="98%",g.style.position="absolute"),$("#outlist_ul li").hover(function(){$(this).css("background","#E4EEFE")},function(){$(this).css("background","#FFFFFF")}),$("#outlist").hover(function(){$("#outlist_ul").css("display","block")},function(){$("#outlist_ul").css("display","none")}),$("#setting").click(function(){$("#masking").css("display","block"),$("#setting_divtopmsg").html(null),$("#setting_div").css("display","block"),Initialize()})},config={get_table:function(){var e,a=[{input:{},checked:{}}],b=$("#setting_div input[type=checkbox]"),c=$("#setting_div input[type=text]"),d=document.getElementById("setting_aria2_headers");for(e=0;e<b.length;e++)a[0].checked[$(b[e]).attr("id")]=$(b[e]).attr("checked");for(e=0;e<c.length;e++)a[0].input[$(c[e]).attr("id")]=$(c[e]).attr("value");return d.value&&(a[0].textarea=d.value),a},save:function(a){var e,f,b="iswebjs",c=365,d=new Date;d.setTime(d.getTime()+1e3*60*60*24*c);for(e in a[0].checked)"iswebjs"==e&&(document.cookie=a[0].checked.iswebjs?b+"="+"1"+";expires="+d.toGMTString()+";path=/;":b+"="+"0"+";expires="+d.toGMTString()+";path=/;",delete a[0].checked[e]);f=window.btoa(encodeURIComponent(JSON.stringify(a))),b="bcofl_v2",document.cookie=b+"="+f+";expires="+d.toGMTString()+";path=/;"},get:function(){var c,a="bcofl_v2",b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=b?(c=window.atob(b[2]),config.params=JSON.parse(decodeURIComponent(c)),config.params):null},params:[]},aria2send_data={getGlobalOption:function(){var a,b;SetMessage({type:LOADING,msg:"请稍后...",sticky:!0}),a={jsonrpc:"2.0",id:1,method:"aria2.getGlobalOption",params:[]},b={type:"POST",url:config.params[0].input.rpc_input+"?tm="+(new Date).getTime().toString(),data:JSON.stringify(a),dataType:"JSON",success:function(){fileinfo.out_type="aria2_rpc",fileinfo.getinfo()},contentType:"application/x-www-form-urlencoded; charset=UTF-8",error:function(){SetMessage({type:CAUTION,msg:"先确保与Aria2RPC能够正常通信后在使用喔。",sticky:!1})}},config.params[0].checked.rpc_distinguish&&(b.headers={Authorization:"Basic "+btoa(config.params[0].input.rpc_user+":"+config.params[0].input.rpc_pass)}),HttpSendRead(b)},getVersion:function(){var a=[{jsonrpc:"2.0",method:"aria2.getVersion",id:1}],b={type:"POST",url:$("#rpc_input").attr("value")+"?tm="+(new Date).getTime().toString(),data:JSON.stringify(a),dataType:"JSON",success:function(a){$("#send_test").attr("type",0),$("#send_test").html("ARIA2版本为： "+a[0].result.version)},contentType:"application/x-www-form-urlencoded; charset=UTF-8",error:function(a){$("#send_test").attr("type",0),$("#send_test").html(a+"错误，点击重新测试")}};$("#rpc_distinguish").attr("checked")&&(b.headers={Authorization:"Basic "+btoa($("#rpc_user").attr("value")+":"+$("#rpc_pass").attr("value"))}),HttpSendRead(b)},addUri:function(a){var b={type:"POST",url:config.params[0].input.rpc_input+"?tm="+(new Date).getTime().toString(),data:JSON.stringify(a),dataType:"JSON",success:function(){},contentType:"application/x-www-form-urlencoded; charset=UTF-8",error:function(){}};config.params[0].checked.rpc_distinguish&&(b.headers={Authorization:"Basic "+btoa(config.params[0].input.rpc_user+":"+config.params[0].input.rpc_pass)}),HttpSendRead(b)}},fileinfo={info:[],vcode:{},data:[],isdir:0,file_fsid:[],filelist:[],dir_fsid:[],dir_savename:"",savename:"",out_type:"",share_path:"",ajax_state:0,sign:"",temp:"",mycloud_fileinfo:{},ajaxsuccess:function(a){var c,d,e,b=a;if(0==b.errno){if(b.list){for(c=0;c<fileinfo.info.length;c++)0==fileinfo.info[c].isdir&&(fileinfo.savename=fileinfo.info[c].server_filename,config.params[0].checked.web_path_save&&(fileinfo.savename=config.params[0].input.down_dir+fileinfo.share_path+"/"+fileinfo.info[c].server_filename),d=combination[fileinfo.out_type](b.list[fileinfo.info[c].fs_id],fileinfo.savename),fileinfo.data.push(d));if(fileinfo.file_fsid.splice(0,fileinfo.file_fsid.length),fileinfo.info.splice(0,fileinfo.info.length),0!=fileinfo.dir_fsid.length)e="fid_list="+JSON.stringify(fileinfo.dir_fsid),fileinfo.isdir=1,fileinfo.getdinlk(e);else if(e="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(fileinfo.data.join("")),"wget"==fileinfo.out_type)down_dialog(fileinfo.out_type,e,fileinfo.data.join("")),$("#masking").css("display","block"),SetMessage({type:SUCCESS,sticky:!1,msg:"完成咯~~~"}),fileinfo.ajax_state=0;else if("aria2_rpc"==fileinfo.out_type){for(c=0;c<fileinfo.data.length;c++)aria2send_data.addUri(fileinfo.data[c]);SetMessage({type:SUCCESS,sticky:!1,msg:"已经添加了喔，去确认看下吧。"}),fileinfo.ajax_state=0}else down_dialog(fileinfo.out_type,e,""),$("#masking").css("display","block"),SetMessage({type:SUCCESS,sticky:!1,msg:"完成咯~~~"}),fileinfo.ajax_state=0}else if(b.dlink)if(fileinfo.savename=fileinfo.info.server_filename,config.params[0].checked.web_path_save&&(fileinfo.savename=config.params[0].input.down_dir+"/"+fileinfo.info.path),1==fileinfo.isdir&&(fileinfo.savename="【打包下载】"+fileinfo.dir_savename+"_等.zip",fileinfo.dir_fsid.splice(0,fileinfo.dir_fsid.length)),d=combination[fileinfo.out_type](b.dlink,fileinfo.savename),fileinfo.data.push(d),fileinfo.info.splice(0,fileinfo.info.length),fileinfo.file_fsid.splice(0,fileinfo.file_fsid.length),0!=fileinfo.dir_fsid.length)e="fid_list="+JSON.stringify(fileinfo.dir_fsid),fileinfo.isdir=1,fileinfo.getdinlk(e);else if(e="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(fileinfo.data.join("")),"wget"==fileinfo.out_type)down_dialog(fileinfo.out_type,e,fileinfo.data.join("")),$("#masking").css("display","block"),SetMessage({type:SUCCESS,sticky:!1,msg:"完成咯~~~"}),fileinfo.ajax_state=0;else if("aria2_rpc"==fileinfo.out_type){for(c=0;c<fileinfo.data.length;c++)aria2send_data.addUri(fileinfo.data[c]);SetMessage({type:SUCCESS,sticky:!1,msg:"已经添加了喔，去确认看下吧。"}),fileinfo.ajax_state=0}else down_dialog(fileinfo.out_type,e,""),$("#masking").css("display","block"),SetMessage({type:SUCCESS,sticky:!1,msg:"完成咯~~~"}),fileinfo.ajax_state=0}else-19==b.errno?(fileinfo.vcode=b.vcode,alert_dialog.create(),alert_dialog.img(fileinfo.vcode),alert_dialog.event()):(SetMessage({type:CAUTION,sticky:!1,msg:"在获取文件地址的时候失败了。。。。"}),fileinfo.ajax_state=0)},getdinlk:function(a){var d,e,f,b=FileUtils.share_uk,c=FileUtils.share_id;SetMessage({toastMode:LOADING,msg:"努力加载中....",sticky:!0}),d="http://"+window.location.host+"/share/download?channel=chunlei&clienttype=0&web=1"+"&uk="+b+"&shareid="+c+"&timestamp="+FileUtils.share_timestamp+"&sign="+FileUtils.share_sign+"&bdstoken="+FileUtils.bdstoken,0==fileinfo.isdir&&(d+="&nozip=1"),e=d,f={type:"POST",url:e,data:a,dataType:"JSON",success:function(a){fileinfo.ajaxsuccess(a)},error:function(){SetMessage({type:CAUTION,sticky:!1,msg:"在获取文件信息的时候失败了。。"}),fileinfo.ajax_state=0}},HttpSendRead(f)},dtcount:function(a){var b,c,d,f,g;fileinfo.temp=a,b=FileUtils.share_uk,c=FileUtils.share_id,d="http://"+window.location.host+"/mis/dtcount?channel=chunlei&clienttype=0&web=1&bdstoken="+FileUtils.bdstoken,new FormData,f="uk="+b+"&filelist="+JSON.stringify(fileinfo.filelist)+"&sid="+c+"&ctime="+FileUtils.share_timestamp+"&public=1",g={type:"POST",url:d,data:f,dataType:"JSON",success:function(a){0==a.errno?fileinfo.getdinlk(fileinfo.temp):0!=a.errno&&SetMessage({type:CAUTION,sticky:!1,msg:"获取下载地址失败，（"+a.errno+"）"})},error:function(){SetMessage({type:CAUTION,sticky:!1,msg:"在获取文件信息的时候失败了。。"}),fileinfo.ajax_state=0}},HttpSendRead(g)},getinfo:function(){var a,b,c,d,e,f,g;if(0!=fileinfo.ajax_state)return null;if(fileinfo.ajax_state=1,1==window.SHARE){if(fileinfo.data.splice(0,fileinfo.data.length),fileinfo.filelist.splice(0,fileinfo.filelist.length),fileinfo.dir_fsid.splice(0,fileinfo.dir_fsid.length),fileinfo.file_fsid.splice(0,fileinfo.file_fsid.length),disk.util.ViewShareUtils)fileinfo.info.push(JSON.parse(disk.util.ViewShareUtils.viewShareData)),fileinfo.file_fsid.push(fileinfo.info[0].fs_id),fileinfo.isdir=0,a="fid_list="+JSON.stringify(fileinfo.file_fsid),fileinfo.dtcount(a);else if(FileUtils.getListViewCheckedItems()){if(fileinfo.info=FileUtils.getListViewCheckedItems(),fileinfo.share_path=FileUtils._mFileFilter._mTag,0==fileinfo.info.length)return SetMessage({type:CAUTION,sticky:!1,msg:"请先选择1个以上的文件"}),fileinfo.ajax_state=0,null;for(b=0;b<fileinfo.info.length;b++)1==fileinfo.info[b].isdir?config.params[0].checked.dirzip&&(fileinfo.dir_fsid.push(fileinfo.info[b].fs_id),fileinfo.dir_savename||(fileinfo.dir_savename=fileinfo.info[b].server_filename)):0==fileinfo.info[b].isdir&&(c={fid:fileinfo.info[b].fs_id,category:fileinfo.info[b].category},fileinfo.filelist.push(c),fileinfo.file_fsid.push(fileinfo.info[b].fs_id));0!=fileinfo.file_fsid.length?(fileinfo.isdir=0,a="fid_list="+JSON.stringify(fileinfo.file_fsid),fileinfo.dtcount(a)):0==fileinfo.file_fsid.length&&0!=fileinfo.dir_fsid.length&&(a="fid_list="+JSON.stringify(fileinfo.dir_fsid),fileinfo.isdir=1,fileinfo.dtcount(a)),0==fileinfo.file_fsid.length&&0==fileinfo.dir_fsid.length&&(fileinfo.ajax_state=0)}}else{if(fileinfo.data.splice(0,fileinfo.data.length),fileinfo.filelist.splice(0,fileinfo.filelist.length),fileinfo.dir_fsid.splice(0,fileinfo.dir_fsid.length),fileinfo.file_fsid.splice(0,fileinfo.file_fsid.length),"undefined"==typeof system&&(window.system=require("common:widget/data-center/data-center.js")),"undefined"==typeof hash&&(window.hash=require("common:widget/hash/hash.js")),d=system.get("selectedItemList"),e=[],f=hash.get("path"),d.forEach(function(a){a=a[0],e.push({fs_id:a.getAttribute("data-id"),isdir:a.getAttribute("data-extname"),server_filename:getElementsByClassName("name","div",a).getAttribute("title"),path:f})}),fileinfo.info=e,0==fileinfo.info.length)return SetMessage({type:CAUTION,sticky:!1,msg:"请先选择1个以上的文件"}),fileinfo.ajax_state=0,null;for(g=[],b=0;b<fileinfo.info.length;b++)"dir"!=fileinfo.info[b].isdir&&(fileinfo.savename=fileinfo.info[b].server_filename,config.params[0].checked.web_path_save&&(fileinfo.savename=fileinfo.info[b].path),g.push(fileinfo.info[b].fs_id),fileinfo.temp='{"fs_id":'+fileinfo.info[b].fs_id+',"name":"'+fileinfo.savename+'","dlink":""}',fileinfo.mycloud_fileinfo[fileinfo.info[b].fs_id]=JSON.parse(fileinfo.temp));0!=g.length?(fileinfo.get_mycloud_dlnk(g),fileinfo.ajax_state=0):(SetMessage({type:CAUTION,sticky:!1,msg:"不要单独选择文件夹，个人网盘暂时没有支持文件夹"}),fileinfo.ajax_state=0)}},out_cloudfileinfo:function(){var a,b;if(SetMessage({type:SUCCESS,sticky:!1,msg:"完成咯~"}),0!=fileinfo.data.length)if(a="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(fileinfo.data.join("")),"aria2_rpc"==fileinfo.out_type){for(b=0;b<fileinfo.data.length;b++)aria2send_data.addUri(fileinfo.data[b]);SetMessage({type:SUCCESS,sticky:!1,msg:"已经添加了喔，去确认看下吧。"}),fileinfo.ajax_state=0}else"wget"==fileinfo.out_type?(down_dialog(fileinfo.out_type,a,fileinfo.data.join("")),$("#masking").css("display","block"),fileinfo.ajax_state=0):(down_dialog(fileinfo.out_type,a,""),$("#masking").css("display","block"),fileinfo.ajax_state=0);else fileinfo.ajax_state=0},get_mycloud_dlnk:function(a){var b,c;return SetMessage({toastMode:LOADING,msg:"正在努力载入中……",sticky:!0}),FileUtils.sign2||(FileUtils=yunData,FileUtils.sign2=function(a,b){var g,h,i,j,c=[],d=[],e="",f=a.length;for(g=0;256>g;g++)c[g]=a.substr(g%f,1).charCodeAt(0),d[g]=g;for(h=g=0;256>g;g++)h=(h+d[g]+c[g])%256,i=d[g],d[g]=d[h],d[h]=i;for(j=h=g=0;g<b.length;g++)j=(j+1)%256,h=(h+d[j])%256,i=d[j],d[j]=d[h],d[h]=i,k=d[(d[j]+d[h])%256],e+=String.fromCharCode(b.charCodeAt(g)^k);return e}),fileinfo.sign="undefined"!=typeof FileUtils.base64Encode?FileUtils.base64Encode(FileUtils.sign2(FileUtils.sign3,FileUtils.sign1)):fileinfo.BaiduBase64encode(FileUtils.sign2(FileUtils.sign3,FileUtils.sign1)),"undefined"==typeof fileinfo.sign?(SetMessage({type:CAUTION,sticky:!1,msg:"无法获取请求下载地址时的参数，（待更新...）"}),null):(b="sign="+encodeURIComponent(fileinfo.sign)+"&timestamp="+FileUtils.timestamp+"&fidlist="+encodeURIComponent(JSON.stringify(a))+"&type=dlnk",c={type:"POST",url:"http://"+window.location.host+"/api/download?channel=chunlei&clienttype=0&web=1&bdstoken="+FileUtils.bdstoken,data:b,dataType:"JSON",success:function(a){if(0==a.errno){for(var b=0;b<a.dlink.length;b++)fileinfo.mycloud_fileinfo[a.dlink[b].fs_id].dlink=a.dlink[b].dlink,fileinfo.data.push(combination[fileinfo.out_type](a.dlink[b].dlink,fileinfo.mycloud_fileinfo[a.dlink[b].fs_id].name));fileinfo.out_cloudfileinfo()}112==a.error&&SetMessage({type:CAUTION,sticky:!1,msg:"当前页面已超时，请刷新页面后重试。（"+a.errno+"）"}),0!=a.errno&&112!=a.errno&&SetMessage({type:CAUTION,sticky:!1,msg:"获取下载地址失败。（"+a.errno+"）"})},error:function(){SetMessage({type:CAUTION,sticky:!1,msg:"在获取文件信息的时候失败了。。"}),fileinfo.ajax_state=0}},HttpSendRead(c),void 0)},BaiduBase64encode:function(a){var b,c,d,e,f,g,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(d=a.length,c=0,b="";d>c;){if(e=255&a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4),b+="==";break}if(f=a.charCodeAt(c++),c==d){b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2),b+="=";break}g=a.charCodeAt(c++),b+=h.charAt(e>>2),b+=h.charAt((3&e)<<4|(240&f)>>4),b+=h.charAt((15&f)<<2|(192&g)>>6),b+=h.charAt(63&g)}return b}},headers_={UA:{chrome:"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.5 Safari/537.36",firefox:"Mozilla/5.0 (Windows NT 6.1; rv:26.0) Gecko/20100101 Firefox/26.0",exe:"netdisk;4.4.0.6;PC;PC-Windows;6.2.9200;WindowsBaiduYunGuanJia"},set_UA:function(a){var b=document.getElementById("setting_aria2_useragent_input");return b.value=headers_.UA[a],b.disabled="disabled",!0}},alert_dialog={create:function(){var b,c,d,e,f,g,h,a=document.createElement("div");a.className="b-panel b-dialog alert-dialog",a.id="alert_div",b=[],b.push('<div class="dlg-hd b-rlv">'),b.push('<div title="关闭" id="alert_dialog_close" class="dlg-cnr dlg-cnr-r"></div>'),b.push("<h3>验证码</h3>"),b.push("</div>"),b.push('<div class="dlg-bd">'),b.push('<div class="alert-dialog-msg center">'),b.push('<div class="download-verify" id="downloadVerify">'),b.push('<div class="verify-body">请输入验证码： '),b.push('<input id="verification" type="text" class="input-code" maxlength="4">'),b.push('<img id="yanzhengma" class="img-code" alt="验证码获取中" src="" width="100" height="30">'),b.push('<a href="javascript:;" class="underline" id="huanyizhang">换一张</a>'),b.push("</div>"),b.push('<div class="verify-error"></div></div>'),b.push("</div></div>"),b.push('<div class="dlg-ft b-rlv">'),b.push('<div class="alert-dialog-commands clearfix center">'),b.push('<a href="javascript:;" id="okay" class="sbtn okay"><b>确定</b></a>'),b.push('<a href="javascript:;" id="ignore" class="dbtn cancel"><b>取消</b></a>'),b.push("</div>"),b.push('<div class="clearfix alert-dialog-commands-plus" >'),b.push("</div></div>"),a.innerHTML=b.join(""),document.body.appendChild(a),c=$("#alert_div"),d=$(window).width(),e=$(window).height(),f=$(document).scrollTop(),g=(d-c.width())/2,h=(e-c.height())/2+f,$("#alert_div").css({left:g+"px",top:h+"px"}),$("#alert_div").css({display:"block",border:"1px solid #999"}),$("#masking").css("display","block")},img:function(a){var b="http://vcode.baidu.com/genimage";$("#yanzhengma").attr("src",b+"?"+a)},event:function(){$("#huanyizhang").unbind().click(function(){var a="http://vcode.baidu.com/genimage";$("#yanzhengma").attr("src",a+"?"+fileinfo.vcode+"&"+(new Date).getTime())}),$("#okay").unbind().click(function(){var a=$("#verification").attr("value"),b="fid_list="+JSON.stringify(fileinfo.file_fsid);1==fileinfo.isdir&&(b="fid_list="+JSON.stringify(fileinfo.dir_fsid)),b=b+"&input="+a+"&vcode="+fileinfo.vcode,fileinfo.getdinlk(b),$("#alert_div").remove(),$("#masking").css("display","none")}),$("#ignore").unbind().click(function(){$("#alert_div").remove(),$("#masking").css("display","none"),SetMessage({type:CAUTION,sticky:!1,msg:"唉....."}),fileinfo.ajax_state=0}),$("#alert_dialog_close").unbind().click(function(){$("#alert_div").remove(),$("#masking").css("display","none"),SetMessage({type:CAUTION,sticky:!1,msg:"唉....."}),fileinfo.ajax_state=0})}},down_dialog=function(a,b,c){var f,g,h,i,j,k,l,d={aria2:"aria2.session",wget:"wget.txt",idm:"idmlist.ef2"},e=document.createElement("div");e.className="b-panel b-dialog alert-dialog",e.id="down_dialog",e.style.display="block",e.style.border="1px solid #999",f=[],f.push('<div class="dlg-hd b-rlv">'),f.push('<div title="关闭" id="down_dialog_close" class="dlg-cnr dlg-cnr-r"></div>'),f.push("<h3>下载"+a+"文件</h3></div>"),f.push('<div style="margin: 22px 180px;">'),f.push("<a href="+b+' class="new-dbtn" download="'+d[a]+'"><em class="icon-download"></em><b>下载文件</b></a>'),f.push("</div>"),0!=c.length&&f.push('<div style="width:425px;height:200px;margin: -13px auto 10px;border:1px solid rgb(240, 240, 240); background-color: rgb(250, 250, 250);overflow-y: auto;overflow-x: auto;">'+c+"</div>"),e.innerHTML=f.join(""),document.body.appendChild(e),g=$("#down_dialog"),h=$(window).width(),i=$(window).height(),j=$(document).scrollTop(),k=(h-g.width())/2,l=(i-g.height())/2+j,e.style.left=k+"px",e.style.top=l+"px",$("#down_dialog_close").unbind().click(function(){g.remove(),$("#masking").css("display","none")})},combination={header:function(){var g,h,a=[],b=document.getElementById("setting_aria2_useragent_input").value,c=document.getElementById("setting_aria2_referer_input").value,d=config.params[0].input.setting_aria2_useragent_input,e=config.params[0].input.setting_aria2_referer_input,f=config.params[0].textarea;if(b?a.push("User-Agent: "+b):d&&a.push("User-Agent: "+d),config.params[0].checked.referer_auto?a.push("Referer: "+combination.referer()):c?a.push("Referer: "+c):e&&a.push("Referer: "+e),f)for(g=f.split("\n"),h=0;h<g.length;h++)a.push(g[h]);return a.push("Cookie: "+home_cookie),a},aria2_rpc:function(a,b){var c=[{jsonrpc:"2.0",method:"aria2.addUri",id:(new Date).getTime(),params:[[a],{out:b,header:combination.header()}]}],d=b;return"/"==d.substring(0,1)&&(c[0].params[1].out=d.substring(1,d.length)),c
},aria2:function(a,b){var e,f,c=b,d=a+"\r\n";d+="/"==c.substring(0,1)?" out="+c.substring(1,c.length)+"\r\n":" out="+b+"\r\n",e=combination.header();for(f in e)d+=" header="+e[f]+"\r\n";return d+="\r\n"},wget:function(a,b){var e,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d="wget -c -O ";for(e=0;e<b.length;e++)d+=-1==c.indexOf(b[e])?"\\"+b[e]:b[e];return d+=" '"+a+"'"+"\r\n"},idm:function(a){var c="<\r\n"+a+"\r\n>\r\n";return c}},Initialize=function(){var a,b,c,d,e,f;if(config.get()){a=document.getElementById("setting_aria2_useragent_input").value,b=document.getElementById("setting_aria2_referer_input").value,$("#setting_div input[type=checkbox]").attr("checked",!1),$("#setting_div input[type=text]").attr("value",null),config.params[0].input.setting_aria2_useragent_input||(document.getElementById("setting_aria2_useragent_input").value=a),config.params[0].input.setting_aria2_referer_input||(document.getElementById("setting_aria2_referer_input").value=b);for(c in config.params[0].input)$("#"+c).attr("value",config.params[0].input[c]);for(c in config.params[0].checked)$("#"+c).attr("checked",config.params[0].checked[c]);for(config.params[0].textarea&&(document.getElementById("setting_aria2_headers").value=config.params[0].textarea),d=$("#typeout input[type=checkbox]"),c=0;c<d.length;c++)$(d[c]).attr("checked")?(e=$(d[c]).attr("id").split("_")[0],$("#out_"+e).parent().css("display","block")):(e=$(d[c]).attr("id").split("_")[0],$("#out_"+e).parent().css("display","none"));$("#rpc_distinguish").attr("checked")?($("#rpc_user").removeAttr("disabled"),$("#rpc_pass").removeAttr("disabled")):($("#rpc_pass").attr("disabled","disabled"),$("#rpc_user").attr("disabled","disabled")),$("#referer_auto").attr("checked")?$("#setting_aria2_referer_input").attr("disabled","disabled"):$("#setting_aria2_referer_input").removeAttr("disabled"),f=document.cookie.match(new RegExp("(^| )iswebjs=([^;]*)(;|$)")),f=f?f.length>1?f[2]:"0":"0",1==f&&$("#iswebjs").attr("checked",!0)}},button(),add_setting_div(),Initialize(),masking()}var iswebjs,datadefault,base64_data,Days,exp,cookiedata,name="bcofl_v2",arr=document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));if(name="iswebjs",iswebjs=document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)")),iswebjs=iswebjs?iswebjs.length>1?iswebjs[2]:"0":"0",window.XMLHttpRequest?"undefined"==typeof HttpSendRead&&(window.HttpSendRead=function(info){function httpclose(){http.abort()}var timeId,http=new XMLHttpRequest,contentType="application/x-www-form-urlencoded; charset=UTF-8",timeout=3e3;null!=info.contentType&&(contentType=info.contentType),null!=info.timeout&&(timeout=info.timeout),timeId=setTimeout(httpclose,timeout),http.onreadystatechange=function(){4==http.readyState&&(200==http.status&&http.status<300||304==http.status?(clearTimeout(timeId),"JSON"==info.dataType?info.success(JSON.parse(http.responseText)):"SCRIPT"==info.dataType&&(eval(http.responseText),info.success(http.responseText))):(clearTimeout(timeId),info.error(http.status)))},http.open(info.type,info.url,!0),http.setRequestHeader("Content-type",contentType);for(h in info.headers)http.setRequestHeader(h,info.headers[h]);"POST"==info.type?http.send(info.data):http.send()}):alert("脚本不能使用，快去换个浏览器。"),arr)try{cookiedata=JSON.parse(decodeURIComponent(window.atob(arr[2]))),"undefined"==typeof perform_of_number&&"undefined"==typeof mandatory&&"1"==iswebjs?loadjs():("0"==iswebjs||1==perform_of_number||1==mandatory)&&localjs()}catch(errortype){SetMessage({type:CAUTION,msg:"脚本错误："+errortype,sticky:!0})}else datadefault=JSON.parse('[{"input":{"rpc_input":"http://192.168.1.1:6800/jsonrpc"},"checked":{"aria2rpc_checkbox":"checked"}}]'),base64_data=window.btoa(encodeURIComponent(JSON.stringify(datadefault))),name="bcofl_v2",Days=365,exp=new Date,exp.setTime(exp.getTime()+1e3*60*60*24*Days),document.cookie=name+"="+base64_data+";expires="+exp.toGMTString()+";path=/;",A()}function createMsgDiv(){function e(){var d,e,f,g,a=document.body.clientWidth;document.body.clientHeight,document.body.scrollTop,d=(a-getStyle(mini("#msgdiv")[0],"width"))/2,0==window.SHARE?e=mini(".module-list-view")[0].offsetTop+5:(f=mini('div[class="link-title clearfix btn-list"]'),g=mini('header[class="slide-show-header clearfix b-bdr-slv"]'),0!=g.length&&(e=g[0].getBoundingClientRect().bottom+5),0!=f.length&&(e=f[0].getBoundingClientRect().bottom+5)),mini("#msgdiv")[0].style.left=d+"px",mini("#msgdiv")[0].style.top=e+"px"}var a=document.createElement("div"),b=document.createElement("a"),c=document.createElement("div"),d=document.createElement("em");a.id="msgdiv",d.style.cssText="background: url('/res/static/images/btn_icon.gif') no-repeat; height: 20px; width: 20px; background-position: -42px -229px; position: absolute; top: 12px; left: 2px;",a.style.cssText="width:290px; color: #FF6830; border: 1px solid rgb(219, 175, 62); background: #FFE59E; border: #DBAF3E 1px solid; position: absolute; /* padding-left: 10px; padding-right: 10px; */ text-align: left; /*text-shadow: 1px 1px 3px #888;*/ -webkit-box-shadow: 0px 0px 10px 0px #dbae3e; box-shadow: 0px 0px 10px 0px #dbae3e; display:none; z-index: 999;",b.style.cssText="position: absolute; font-weight: bold; margin-left: 270px; top: -5px; font-size: 20px; text-decoration:none;",c.style.cssText="word-wrap: break-word; word-break: normal; width: 245px; padding-top: 10px; padding-bottom: 10px; padding-left: 25px; padding-right: 25px;",b.setAttribute("onclick","javascript:mini('#msgdiv')[0].style.display='none';"),b.setAttribute("href","javascript:void(0);"),b.innerHTML="×",document.body.appendChild(a),a.appendChild(b),a.appendChild(c),a.appendChild(d),window.CAUTION="url(http://pan.baidu.com/res/static/images/btn_icon.gif) -42px -269px no-repeat",window.FAILURE="url(http://pan.baidu.com/res/static/images/btn_icon.gif) -42px -249px no-repeat",window.SUCCESS="url(http://pan.baidu.com/res/static/images/btn_icon.gif) -42px -229px no-repeat",window.LOADING="url(http://s2.pan.bdstatic.com/res/static/images/loading.gif) no-repeat",e(),window.addEventListener("resize",e)}var home_cookie,mini,version="0.3.0",thedate_update="2014/08/03",baidu_version="201407314102",updatejsurl="http://downjs.sinaapp.com/",down=["http://downjs.sinaapp.com/javascript/baiducloud_exporter_UglifyJS.js","http://mormts.github.io/baiducloud_exporter/file/js/baiducloud_exporter_UglifyJS.js"];"undefined"==typeof FileUtils?(window.FileUtils="",window.SHARE=0):window.SHARE=1,0==window.SHARE?(home_cookie="BAIDUID="+document.cookie.match(new RegExp("(^| )BAIDUID=([^;]*)(;|$)"))[2]+";",home_cookie+="BDUSS="+yunData.MYBDUSS+";",home_cookie+="NBID="+document.cookie.match(new RegExp("(^| )NBID=([^;]*)(;|$)"))[2]+";",home_cookie+="cflag="+document.cookie.match(new RegExp("(^| )cflag=([^;]*)(;|$)"))[2]+";"):home_cookie="",mini=function(){function f(k,l){var m,n,o,p,q,w,r,s,t,u,v,x;if(l=l||document,m=/^[\w\-_#]+$/.test(k),!m&&l.querySelectorAll)return g(l.querySelectorAll(k));if(k.indexOf(",")>-1){for(n=k.split(/,/g),o=[],p=0,q=n.length;q>p;++p)o=o.concat(f(n[p],l));return i(o)}if(r=k.match(a),s=r.pop(),t=(s.match(c)||e)[1],u=!t&&(s.match(b)||e)[1],v=!t&&(s.match(d)||e)[1],u&&!v&&l.getElementsByClassName)w=g(l.getElementsByClassName(u));else if(w=!t&&g(l.getElementsByTagName(v||"*")),u&&(w=j(w,"className",RegExp("(^|\\s)"+u+"(\\s|$)"))),t)return x=l.getElementById(t),x?[x]:[];return r[0]&&w[0]?h(r,w):w}function g(a){try{return Array.prototype.slice.call(a)}catch(b){for(var c=[],d=0,e=a.length;e>d;++d)c[d]=a[d];return c}}function h(a,f,g){var p,q,r,j,k,l,m,n,o,i=a.pop();if(">"===i)return h(a,f,!0);for(j=[],k=-1,l=(i.match(c)||e)[1],m=!l&&(i.match(b)||e)[1],n=!l&&(i.match(d)||e)[1],o=-1,n=n&&n.toLowerCase();p=f[++o];){q=p.parentNode;do if(r=!n||"*"===n||n===q.nodeName.toLowerCase(),r=r&&(!l||q.id===l),r=r&&(!m||RegExp("(^|\\s)"+m+"(\\s|$)").test(q.className)),g||r)break;while(q=q.parentNode);r&&(j[++k]=p)}return a[0]&&j[0]?h(a,j):j}function j(a,b,c){for(var e,d=-1,f=-1,g=[];e=a[++d];)c.test(e[b])&&(g[++f]=e);return g}var a=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/gi,b=/^(?:[\w\-_]+)?\.([\w\-_]+)/,c=/^(?:[\w\-_]+)?#([\w\-_]+)/,d=/^([\w\*\-_]+)/,e=[null,null],i=function(){var a=+new Date,b=function(){var b=1;return function(c){var d=c[a],e=b++;return d?!1:(c[a]=e,!0)}}();return function(c){for(var h,d=c.length,e=[],f=-1,g=0;d>g;++g)h=c[g],b(h)&&(e[++f]=h);return a+=1,e}}();return f}(),"undefined"==typeof FileUtils&&(window.FileUtils=""),SetMessage=function(a){function b(){mini("#msgdiv")[0].style.display="none",window.MsgTime=0}mini("#msgdiv div")[0].innerHTML=a.msg,mini("#msgdiv em")[0].style.background=a.type,mini("#msgdiv")[0].style.display="block",0==a.sticky&&("undefined"==typeof window.MsgTime||0==window.MsgTime?window.MsgTime=window.setTimeout(b,5e3):(clearTimeout(window.MsgTime),window.MsgTime=0,SetMessage(a)))},createMsgDiv(),A();